<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html class="ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8" lang="en"> <![endif]-->
<!--[if (gt IE 8)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>Photos Near Me</title>
    <meta name="description" content="Photos Near Me" />
    <meta name="author" content="Eric Ferraiuolo" />

    <link rel="stylesheet" href="/style.css" />
    
</head>

<body class="loading">
        
    <div id="content"></div>
    
    <script id="header-template" type="text/x-handlebars-template">
        <h1>
            <span id="logo">
                <span></span>
                <a href="/"></a>
            </span>
            Photos Near
            <span id="location">
                {{#if place}}
                    {{place.locality}}, {{place.region}}
                {{else}}
                    Me
                {{/if}}
            </span>
        </h1>
    </script>
    
    <script id="locating-template" type="text/x-handlebars-template">
        {{> header}}
        <p>Locating you…</p>
    </script>
    
    <script id="grid-template" type="text/x-handlebars-template">
        {{> header}}
        <p>Photos: {{size}}</p>
    </script>
    
    <script id="grid-photos-template" type="text/x-handlebars-template">
        <ul class="layout">
        {{#each photos}}
            <li class="photo"><a href="{{pageUrl}}"><img src="{{thumbUrl}}" /></a></li>
        {{/each}}
        </ul>
    </script>
    
    <script id="lightbox-template" type="text/x-handlebars-template">
        {{> header}}
        <p><a class="back" href="/place/{{place.woeid}}/">« Back</a></p>
        <p class="photo"><img src="{{largeUrl}}" /></p>
        <h2>{{title}}</h2>
        <p>{{{description}}}</p>
    </script>
    
    <script>
    (function(win, doc) {
        /**
        iOS portrait » landscape scaling fix
        
        By @mathias, @cheeaun and @jdalton
        https://gist.github.com/901295
        **/
        function scaleFix () {
            var addEvent    = 'addEventListener',
                type        = 'gesturestart',
                qsa         = 'querySelectorAll',
                scales      = [1, 1],
                meta        = qsa in doc ? doc[qsa]('meta[name=viewport]') : [];
        
            function fix() {
                meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
                doc.removeEventListener(type, fix, true);
            }
        
            if ((meta = meta[meta.length - 1]) && addEvent in doc) {
                fix();
                scales = [.25, 1.6];
                doc[addEvent](type, fix, true);
            }
        }
        
        /**
        Hide URL Bar for iOS
        
        http://remysharp.com/2010/08/05/doing-it-right-skipping-the-iphone-url-bar/
        **/
        function hideUrlBar () {
            /iPhone/.test(navigator.userAgent) && !location.hash && setTimeout(function () {
                pageYOffset || win.scrollTo(0, 1);
            }, 1000);
        }
        
        scaleFix();
        hideUrlBar();
    }(window, document));
    </script>
    
    <script src="http://use.typekit.com/wkh7ffm.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
    
    <script src="http://fuji.jetpants.com/yui/combo/yui3?build/yui/yui.js&build/loader/loader.js"></script>
    <script src="/handlebars.js"></script>
    <script src="/photosnearme.js"></script>
    <script>
    YUI({
    
        comboBase   : 'http://fuji.jetpants.com/yui/combo/yui3?',
        combine     : true,
        root        : 'build/',
        filter      : 'RAW',
        gallery     : 'gallery-2011.06.01-20-18'
    
    }).use('photosnearme', function(Y){
        
        Y.one('body').removeClass('loading');
        new Y.PhotosNearMe;
    
    });
    </script>
    
</body>
</html>
